<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>CityFitness Auto Access</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>
  <script>
    (function(){
      const CFG = {
        club: "Newlands",
        memberFirst: "Soonho",
        memberLast: "Song",
        memberKey: "843904",
        guestFirst: "Jihye",
        guestLast: "Shin",
        guestEmail: "ysjh0125@gmail.com",
        guestPhone: "02102257467",
        acceptAge: true
      };

      const t = (a,b) => (a||"").toLowerCase().includes((b||"").toLowerCase());
      const fire = e => {
        e && e.dispatchEvent(new Event("input", { bubbles: true }));
        e && e.dispatchEvent(new Event("change", { bubbles: true }));
      };

      const byLabelOrAttr = hint => {
        const labels = [...document.querySelectorAll("label")];
        for (const l of labels) {
          if (t(l.textContent, hint)) {
            const id = l.getAttribute("for");
            if (id) {
              const el = document.getElementById(id);
              if (el) return el;
            }
            const inner = l.querySelector("input,select,textarea");
            if (inner) return inner;
          }
        }
        const inps = [...document.querySelectorAll('input:not([type="hidden"])')];
        for (const i of inps) {
          const ph = i.getAttribute("placeholder") || "";
          const nm = i.getAttribute("name") || "";
          const ar = i.getAttribute("aria-label") || "";
          if (t(ph, hint) || t(nm, hint) || t(ar, hint)) return i;
        }
        return null;
      };

      const setVal = (el, v) => {
        if (!el || v == null) return;
        el.focus();
        el.value = v;
        fire(el);
      };

      window.addEventListener('load', () => {
        let clubSet = false;
        for (const s of document.querySelectorAll("select")) {
          for (const o of s.options) {
            if (t(o.textContent || o.label, CFG.club)) {
              s.value = o.value;
              fire(s);
              clubSet = true;
              break;
            }
          }
          if (clubSet) break;
        }

        const map = [
          ["memberFirst", "Member First Name"],
          ["memberLast", "Member Last Name"],
          ["memberKey", "Member Key Tag"],
          ["guestFirst", "Guest First Name"],
          ["guestLast", "Guest Last Name"],
          ["guestEmail", "Guest Email"],
          ["guestPhone", "Guest Phone"]
        ];
        for (const [key, label] of map) {
          setVal(byLabelOrAttr(label), CFG[key]);
        }

        const cbs = [...document.querySelectorAll('input[type="checkbox"]')];
        let done = false;
        for (const cb of cbs) {
          const lbl = document.querySelector(`label[for="${cb.id}"]`);
          const txt = (lbl && lbl.textContent) || "";
          if (t(txt, "18") || t(txt, "age") || t(txt, "acknowledge") || t(txt, "guest")) {
            cb.checked = !!CFG.acceptAge;
            fire(cb);
            done = true;
            break;
          }
        }
        if (!done && cbs[0]) {
          cbs[0].checked = !!CFG.acceptAge;
          fire(cbs[0]);
        }

        const submitBtn = document.querySelector('button[type="submit"], input[type="submit"]');
        if (submitBtn) {
          setTimeout(() => submitBtn.click(), 300);
        }
      });
    })();
  </script>
</body>
</html>
